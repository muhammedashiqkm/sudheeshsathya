{% extends "admin/base_admin.html" %}
{% load static %}

{% block title %}Edit About Page{% endblock %}

{% block admin_content %}
<div class="admin-form-container">
    <div class="admin-form-header">
        <h2 class="admin-form-title">{{ title }}</h2>
        <p class="admin-form-description">Manage the content of your About page</p>
    </div>
    
    <form method="post" enctype="multipart/form-data" class="admin-form">
        {% csrf_token %}
        
        <div class="form-group">
            <label for="{{ form.title.id_for_label }}" class="form-label">Title</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="form-error">{{ form.title.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.subtitle.id_for_label }}" class="form-label">Subtitle</label>
            {{ form.subtitle }}
            {% if form.subtitle.errors %}
                <div class="form-error">{{ form.subtitle.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.content.id_for_label }}" class="form-label">Content</label>
            {{ form.content }}
            {% if form.content.errors %}
                <div class="form-error">{{ form.content.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group image-group">
            <label for="{{ form.profile_image.id_for_label }}" class="form-label">Profile Image</label>
            {{ form.profile_image }}
            {% if form.instance.profile_image %}
            <div class="current-image-preview">
                <img src="{{ form.instance.profile_image.url }}" alt="Current Profile Image" class="preview-image">
                <p class="preview-caption">Current Profile Image</p>
            </div>
            {% endif %}
            {% if form.profile_image.errors %}
                <div class="form-error">{{ form.profile_image.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-actions">
            <button type="submit" class="btn btn-primary">Save Changes</button>
            <a href="{% url 'admin_dashboard' %}" class="btn btn-secondary">Cancel</a>
        </div>
    </form>
</div>
{% endblock %}

{% block extra_js %}
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Initialize rich text editor if available
        if (typeof CKEDITOR !== 'undefined') {
            CKEDITOR.replace('id_content', {
                height: 400,
                toolbar: [
                    { name: 'document', items: [ 'Source', '-', 'Save', 'NewPage', 'Preview', '-', 'Templates' ] },
                    { name: 'clipboard', items: [ 'Cut', 'Copy', 'Paste', 'PasteText', 'PasteFromWord', '-', 'Undo', 'Redo' ] },
                    { name: 'editing', items: [ 'Find', 'Replace', '-', 'SelectAll', '-', 'Scayt' ] },
                    { name: 'forms', items: [ 'Form', 'Checkbox', 'Radio', 'TextField', 'Textarea', 'Select', 'Button', 'ImageButton', 'HiddenField' ] },
                    '/',
                    { name: 'basicstyles', items: [ 'Bold', 'Italic', 'Underline', 'Strike', 'Subscript', 'Superscript', '-', 'RemoveFormat' ] },
                    { name: 'paragraph', items: [ 'NumberedList', 'BulletedList', '-', 'Outdent', 'Indent', '-', 'Blockquote', 'CreateDiv', '-', 'JustifyLeft', 'JustifyCenter', 'JustifyRight', 'JustifyBlock', '-', 'BidiLtr', 'BidiRtl', 'Language' ] },
                    { name: 'links', items: [ 'Link', 'Unlink', 'Anchor' ] },
                    { name: 'insert', items: [ 'Image', 'Flash', 'Table', 'HorizontalRule', 'Smiley', 'SpecialChar', 'PageBreak', 'Iframe' ] },
                    '/',
                    { name: 'styles', items: [ 'Styles', 'Format', 'Font', 'FontSize' ] },
                    { name: 'colors', items: [ 'TextColor', 'BGColor' ] },
                    { name: 'tools', items: [ 'Maximize', 'ShowBlocks' ] }
                ]
            });
        }
    });
</script>
{% endblock %}